{"version":3,"file":"Task.js","sourceRoot":"","sources":["Task.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AACH,OAAO,cAAc,CAAC;AAEtB,OAAO,EAAC,QAAQ,EAAE,SAAS,EAAC,MAAM,OAAO,CAAC;AAC1C,OAAO,EAAC,WAAW,EAAC,MAAM,kBAAkB,CAAC;AAC7C,OAAO,qBAAqB,MAAM,0CAA0C,CAAC;AAC7E,OAAO,EAAC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAC,MAAM,iBAAiB,CAAC;AAEpD,OAAO,EAAC,WAAW,EAAC,MAAM,kBAAkB,CAAC;AAC7C,OAAO,WAAW,MAAM,gCAAgC,CAAC;AACzD,OAAO,UAAU,MAAM,kBAAkB,CAAC;AAC1C,OAAO,4CAA4C,CAAC;AAEpD,MAAM,WAAW,GAAa,GAAG,EAAE;IAE/B,MAAM,QAAQ,GAAG,WAAW,EAAE,CAAC;IAC/B,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;IACvC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,QAAQ,EAAQ,CAAC;IACzC,MAAM,CAAC,SAAS,EAAE,YAAY,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IAClD,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IAChD,MAAM,CAAC,OAAO,EAAE,UAAU,CAAC,GAAG,QAAQ,CAAc,IAAI,IAAI,EAAE,CAAC,CAAC;IAChE,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,QAAQ,CAAc,IAAI,IAAI,EAAE,CAAC,CAAC;IAE1E,MAAM,QAAQ,GAAG,WAAW,EAAE,CAAC;IAE/B,MAAM,MAAM,GAAG,GAAG,EAAE;QAChB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC,CAAA;IAED,cAAc;IACd,MAAM,UAAU,GAAG,GAAG,EAAE;QACpB,qBAAqB,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;QAClD,WAAW,EAAE,CAAC;QACd,MAAM,EAAE,CAAC;IACb,CAAC,CAAC;IAEF,MAAM,WAAW,GAAG,GAAG,EAAE;QACrB,OAAO,YAAY,CAAC,KAAK,CAAC,CAAC;IAC/B,CAAC,CAAA;IAED,MAAM,OAAO,GAAG,GAAG,EAAE;QACjB,OAAO,YAAY,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC,CAAA;IAED,MAAM,SAAS,GAAG,GAAG,EAAE;QACnB,OAAO,OAAO,EAAE,CAAC;IACrB,CAAC,CAAA;IAED,qBAAqB;IACrB,MAAM,YAAY,GAAG,CAAC,KAAuC,EAAE,EAAE;QAC7D,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,MAAM,QAAQ,GAAG,IAAI,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;QACnD,MAAM,cAAc,GAAS;YACzB,EAAE,EAAE,QAAQ,CAAC,KAAK,CAAC;YACnB,IAAI,EAAE,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAW;YACpC,IAAI,EAAE,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAW;YACpC,QAAQ,EAAE,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAW;YAC5C,GAAG,EAAE,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAW;YAClC,SAAS,EAAE,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAW;YAC9C,OAAO,EAAE,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAW;YAC1C,IAAI,EAAE,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAW;YACpC,OAAO,EAAE,OAAO;SACnB,CAAC;QACF,qBAAqB,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,cAAc,CAAC,CAAC;QAClE,iBAAiB,EAAE,CAAC;QACpB,MAAM,EAAE,CAAC;IACb,CAAC,CAAC;IAEF,MAAM,iBAAiB,GAAG,GAAG,EAAE;QAC3B,OAAO,WAAW,CAAC,KAAK,CAAC,CAAC;IAC9B,CAAC,CAAA;IAED,MAAM,WAAW,GAAG,GAAG,EAAE;QACrB,OAAO,WAAW,CAAC,IAAI,CAAC,CAAC;IAC7B,CAAC,CAAA;IAED,MAAM,QAAQ,GAAG,GAAG,EAAE;QAClB,OAAO,WAAW,EAAE,CAAC;IACzB,CAAC,CAAA;IAED,SAAS,CAAC,GAAG,EAAE;QAEX,MAAM,WAAW,GAAG,IAAI,eAAe,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACzD,MAAM,EAAE,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACjC,IAAI,CAAC,EAAE;YAAE,OAAO;QAChB,QAAQ,CAAC,EAAE,CAAC,CAAC;QAEb,qBAAqB,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;aACtC,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;YACf,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAA;IAEV,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,qBAAqB;IACrB,SAAS,CAAC,GAAG,EAAE;QACX,IAAI,CAAC,IAAI;YAAE,OAAO;QAElB,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;YACZ,6DAA6D;YAC7D,mBAAmB;YACnB,UAAU,CAAC,EAAE,CAAC,CAAC;QACnB,CAAC;aAAM,CAAC;YACJ,UAAU,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QACnC,CAAC;QAED,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;YAClB,6DAA6D;YAC7D,mBAAmB;YACnB,eAAe,CAAC,EAAE,CAAC,CAAC;QACxB,CAAC;aAAM,CAAC;YACJ,eAAe,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QAC9C,CAAC;IACL,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC;IAEX,IAAI,CAAC,IAAI,EAAE,CAAC;QACR,OAAO,uCAAqB,CAAC;IACjC,CAAC;IAED,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;IAC7B,MAAM,IAAI,GAAG,WAAW,CAAC,cAAc,EAAE,CAAC;IAE1C,OAAO,CACH,cAAK,SAAS,EAAC,WAAW,YACtB,kBAAQ,SAAS,EAAC,WAAW,aACzB,aAAI,SAAS,EAAC,WAAW,6BAAkB,EAC3C,uEAAmD,EAClD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,gBAAO,CAAC,CAAC;oBAC9C,KAAC,MAAM,IAAC,SAAS,EAAC,gBAAgB,EAAC,OAAO,EAAC,SAAS,EAAC,OAAO,EAAE,QAAQ,qBAAe,EACzF,KAAC,MAAM,IAAC,SAAS,EAAC,gBAAgB,EAAC,OAAO,EAAC,WAAW,EAAC,OAAO,EAAE,MAAM,qBAAe,EACrF,MAAC,KAAK,IAAC,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,iBAAiB,aAC5C,KAAC,KAAK,CAAC,MAAM,IAAC,WAAW,kBACrB,KAAC,KAAK,CAAC,KAAK,4BAAwB,GACzB,EACf,KAAC,KAAK,CAAC,IAAI,cACP,MAAC,IAAI,IAAC,QAAQ,EAAE,YAAY,aACxB,MAAC,IAAI,CAAC,KAAK,IAAC,SAAS,EAAC,OAAO,aACzB,KAAC,IAAI,CAAC,KAAK,cAAC,+BAAW,GAAa,EACpC,KAAC,IAAI,CAAC,OAAO,IAAC,IAAI,EAAC,MAAM,EAAC,YAAY,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,EAAC,MAAM,GAAE,IACvD,EACb,MAAC,IAAI,CAAC,KAAK,IAAC,SAAS,EAAC,OAAO,aACzB,KAAC,IAAI,CAAC,KAAK,cAAC,+BAAW,GAAa,EACpC,KAAC,IAAI,CAAC,OAAO,IAAC,IAAI,EAAC,MAAM,EAAC,YAAY,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,EAAC,MAAM,GAAE,IACvD,EACb,MAAC,IAAI,CAAC,KAAK,IAAC,SAAS,EAAC,OAAO,aACzB,KAAC,IAAI,CAAC,KAAK,cAAC,mCAAe,GAAa,EACxC,KAAC,IAAI,CAAC,OAAO,IAAC,IAAI,EAAC,MAAM,EAAC,YAAY,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAC,UAAU,GAAE,IAC/D,EACb,MAAC,IAAI,CAAC,KAAK,IAAC,SAAS,EAAC,OAAO,aACzB,KAAC,IAAI,CAAC,KAAK,cAAC,8BAAU,GAAa,EACnC,KAAC,UAAU,IACP,QAAQ,EAAE,OAAO,EACjB,QAAQ,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,EACpC,IAAI,EAAC,KAAK,EACV,gBAAgB,EAAC,eAAe,EAChC,WAAW,EAAE,KAAC,IAAI,CAAC,OAAO,IAAC,IAAI,EAAC,MAAM,GAAG,GAC3C,IACO,EACb,MAAC,IAAI,CAAC,KAAK,IAAC,SAAS,EAAC,OAAO,aACzB,KAAC,IAAI,CAAC,KAAK,cAAC,oCAAgB,GAAa,EACzC,KAAC,UAAU,IACP,QAAQ,EAAE,YAAY,EACtB,QAAQ,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,eAAe,CAAC,IAAI,CAAC,EACzC,IAAI,EAAC,WAAW,EAChB,gBAAgB,EAAC,eAAe,EAChC,WAAW,EAAE,KAAC,IAAI,CAAC,OAAO,IAAC,IAAI,EAAC,MAAM,GAAG,GAC3C,IACO,EACb,MAAC,IAAI,CAAC,KAAK,IAAC,SAAS,EAAC,OAAO,aACzB,KAAC,IAAI,CAAC,KAAK,cAAC,kCAAc,GAAa,EACvC,KAAC,IAAI,CAAC,OAAO,IAAC,IAAI,EAAC,MAAM,EAAC,YAAY,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,EAAC,SAAS,GAAE,IAC7D,EACb,MAAC,IAAI,CAAC,KAAK,IAAC,SAAS,EAAC,OAAO,aACzB,KAAC,IAAI,CAAC,KAAK,cAAC,+BAAW,GAAa,EACpC,KAAC,IAAI,CAAC,OAAO,IAAC,IAAI,EAAC,MAAM,EAAC,YAAY,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,EAAC,MAAM,GAAE,IACvD,EACb,KAAC,MAAM,IAAC,OAAO,EAAC,SAAS,EAAC,IAAI,EAAC,QAAQ,uBAE9B,YACT,KAAC,MAAM,IAAC,OAAO,EAAC,WAAW,EAAC,OAAO,EAAE,iBAAiB,uBAE7C,IACN,GACE,IACT,EACR,eAAK,SAAS,EAAC,YAAY,aACvB,0BAAK,oCAAqB,OAAE,KAAK,IAAO,EACxC,0BAAK,qCAAsB,OAAE,IAAI,CAAC,IAAI,IAAO,EAC7C,0BAAK,qCAAsB,OAAE,IAAI,CAAC,IAAI,IAAO,EAC7C,0BAAK,yCAA0B,OAAE,IAAI,CAAC,QAAQ,IAAO,EACrD,0BAAK,oCAAqB,OAAE,IAAI,CAAC,GAAG,IAAO,EAC3C,0BAAK,0CAA2B,OAAE,IAAI,CAAC,SAAS,IAAO,EACvD,0BAAK,wCAAyB,OAAE,IAAI,CAAC,OAAO,IAAO,EACnD,0BAAK,qCAAsB,OAAE,IAAI,CAAC,IAAI,IAAO,EAC7C,0BAAK,wCAAyB,OAAE,IAAI,CAAC,OAAO,IAAO,IACjD,EACL,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,gBAAO,CAAC,CAAC;oBAC9C,KAAC,MAAM,IAAC,OAAO,EAAC,QAAQ,EAAC,OAAO,EAAE,SAAS,uBAAiB,EAChE,MAAC,KAAK,IAAC,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,WAAW,aACvC,KAAC,KAAK,CAAC,MAAM,IAAC,WAAW,kBACrB,KAAC,KAAK,CAAC,KAAK,0BAAsB,GACvB,EACf,MAAC,KAAK,CAAC,IAAI,eACP,wCAAoB,EACpB,KAAC,MAAM,IAAC,OAAO,EAAC,SAAS,EAAC,OAAO,EAAE,UAAU,qBAEpC,YACT,KAAC,MAAM,IAAC,OAAO,EAAC,WAAW,EAAC,OAAO,EAAE,WAAW,uBAEvC,IACA,IACT,IACH,GACP,CACT,CAAC;AACN,CAAC,CAAC;AAEF,eAAe,WAAW,CAAC","sourcesContent":["/**\n * VirtualYou\n * @license Apache-2.0\n * @author David L Whitehurst\n */\nimport './custom.css';\nimport type React from 'react';\nimport {useState, useEffect} from 'react';\nimport {useLocation} from 'react-router-dom';\nimport AdministrationService from \"../../services/administration.service.ts\";\nimport {Button, Form, Modal} from 'react-bootstrap';\nimport Task from '../../types/task.type.ts';\nimport {useNavigate} from \"react-router-dom\";\nimport AuthService from \"../../services/auth.service.ts\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nconst TaskDetails: React.FC = () => {\n\n    const location = useLocation();\n    const [param, setParam] = useState(\"\");\n    const [task, setTask] = useState<Task>();\n    const [showModal, setShowModal] = useState(false);\n    const [showEdit, setShowEdit] = useState(false);\n    const [dueDate, setDueDate] = useState<Date | null>(new Date());\n    const [completeDate, setCompleteDate] = useState<Date | null>(new Date());\n\n    const navigate = useNavigate();\n\n    const goBack = () => {\n        navigate(-1);\n    }\n\n    // modal state\n    const handleOkay = () => {\n        AdministrationService.deleteTask(parseInt(param));\n        handleClose();\n        goBack();\n    };\n\n    const handleClose = () => {\n        return setShowModal(false);\n    }\n\n    const showPop = () => {\n        return setShowModal(true);\n    }\n\n    const openModal = () => {\n        return showPop();\n    }\n\n    // editor popup modal\n    const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        const formData = new FormData(event.currentTarget);\n        const formTaskValues: Task = {\n            id: parseInt(param),\n            name: formData.get('name') as string,\n            type: formData.get('type') as string,\n            priority: formData.get('priority') as string,\n            due: formData.get('due') as string,\n            completed: formData.get('completed') as string,\n            trigger: formData.get('trigger') as string,\n            note: formData.get('note') as string,\n            userKey: userkey\n        };\n        AdministrationService.updateTask(parseInt(param), formTaskValues);\n        handleEditorClose();\n        goBack();\n    };\n\n    const handleEditorClose = () => {\n        return setShowEdit(false);\n    }\n\n    const showEditPop = () => {\n        return setShowEdit(true);\n    }\n\n    const openEdit = () => {\n        return showEditPop();\n    }\n\n    useEffect(() => {\n\n        const queryParams = new URLSearchParams(location.search);\n        const id = queryParams.get('id');\n        if (!id) return;\n        setParam(id);\n\n        AdministrationService.getTask(parseInt(id))\n            .then((response) => {\n                setTask(response.data);\n            })\n\n    }, []);\n\n    // this is sweet !!!!\n    useEffect(() => {\n        if (!task) return;\n\n        if (!task.due) {\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-expect-error\n            setDueDate(\"\");\n        } else {\n            setDueDate(new Date(task.due));\n        }\n\n        if (!task.completed) {\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-expect-error\n            setCompleteDate(\"\");\n        } else {\n            setCompleteDate(new Date(task.completed));\n        }\n    }, [task]);\n\n    if (!task) {\n        return <div>Loading...</div>;\n    }\n\n    const userkey = task.userKey;\n    const user = AuthService.getCurrentUser();\n\n    return (\n        <div className=\"container\">\n            <header className=\"jumbotron\">\n                <h1 className=\"display-4\">Task Details</h1>\n                <p>This is where we show the entire Task Object</p>\n                {user.roles.includes((\"ROLE_MONITOR\")) ? <meta/> :\n                    <Button className=\"spacial-button\" variant=\"primary\" onClick={openEdit}>Edit</Button>}\n                <Button className=\"spacial-button\" variant=\"secondary\" onClick={goBack}>Back</Button>\n                <Modal show={showEdit} onHide={handleEditorClose}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>Task Edit</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <Form onSubmit={handleSubmit}>\n                            <Form.Group controlId=\"form1\">\n                                <Form.Label><b>Name</b></Form.Label>\n                                <Form.Control type=\"text\" defaultValue={task.name} name=\"name\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form2\">\n                                <Form.Label><b>Type</b></Form.Label>\n                                <Form.Control type=\"text\" defaultValue={task.type} name=\"type\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form3\">\n                                <Form.Label><b>Priority</b></Form.Label>\n                                <Form.Control type=\"text\" defaultValue={task.priority} name=\"priority\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form4\">\n                                <Form.Label><b>Due</b></Form.Label>\n                                <DatePicker\n                                    selected={dueDate}\n                                    onChange={(date) => setDueDate(date)}\n                                    name=\"due\"\n                                    wrapperClassName=\"my-datepicker\"\n                                    customInput={<Form.Control type=\"text\" />}\n                                />\n                            </Form.Group>\n                            <Form.Group controlId=\"form5\">\n                                <Form.Label><b>Completed</b></Form.Label>\n                                <DatePicker\n                                    selected={completeDate}\n                                    onChange={(date) => setCompleteDate(date)}\n                                    name=\"completed\"\n                                    wrapperClassName=\"my-datepicker\"\n                                    customInput={<Form.Control type=\"text\" />}\n                                />\n                            </Form.Group>\n                            <Form.Group controlId=\"form6\">\n                                <Form.Label><b>Trigger</b></Form.Label>\n                                <Form.Control type=\"text\" defaultValue={task.trigger} name=\"trigger\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form7\">\n                                <Form.Label><b>Note</b></Form.Label>\n                                <Form.Control type=\"text\" defaultValue={task.note} name=\"note\"/>\n                            </Form.Group>\n                            <Button variant=\"primary\" type=\"submit\">\n                                Submit\n                            </Button>&nbsp;\n                            <Button variant=\"secondary\" onClick={handleEditorClose}>\n                                Cancel\n                            </Button>\n                        </Form>\n                    </Modal.Body>\n                </Modal>\n                <div className=\"detail-div\">\n                    <div><strong>id: </strong> {param}</div>\n                    <div><strong>name:</strong> {task.name}</div>\n                    <div><strong>type:</strong> {task.type}</div>\n                    <div><strong>priority:</strong> {task.priority}</div>\n                    <div><strong>due:</strong> {task.due}</div>\n                    <div><strong>completed:</strong> {task.completed}</div>\n                    <div><strong>trigger:</strong> {task.trigger}</div>\n                    <div><strong>note:</strong> {task.note}</div>\n                    <div><strong>userKey:</strong> {task.userKey}</div>\n                </div>\n                {user.roles.includes((\"ROLE_MONITOR\")) ? <meta/> :\n                    <Button variant=\"danger\" onClick={openModal}>Delete</Button>}\n                <Modal show={showModal} onHide={handleClose}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>Warning</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <p>Are you sure?</p>\n                        <Button variant=\"primary\" onClick={handleOkay}>\n                            Okay\n                        </Button>&nbsp;\n                        <Button variant=\"secondary\" onClick={handleClose}>\n                            Cancel\n                        </Button>\n                    </Modal.Body>\n                </Modal>\n            </header>\n        </div>\n    );\n};\n\nexport default TaskDetails;\n"]}