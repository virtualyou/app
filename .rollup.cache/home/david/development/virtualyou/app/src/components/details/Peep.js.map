{"version":3,"file":"Peep.js","sourceRoot":"","sources":["Peep.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * VirtualYou\n * @license Apache-2.0\n * @author David L Whitehurst\n */\nimport './custom.css';\nimport type React from 'react';\nimport { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport PersonalService from \"../../services/personal.service.ts\";\nimport Peep from \"../../types/peep.type.ts\";\nimport {Button, Form, Modal} from 'react-bootstrap';\nimport { useNavigate } from \"react-router-dom\";\nimport AuthService from \"../../services/auth.service.ts\";\n\nconst PeepDetails: React.FC = () => {\n\n    const location = useLocation();\n    const [param, setParam] = useState(\"\");\n    const [peep, setPeep] = useState<Peep>();\n    const [showModal, setShowModal] = useState(false);\n    const [showEdit, setShowEdit] = useState(false);\n\n    const navigate = useNavigate();\n\n    const goBack = () => {\n        navigate(-1);\n    }\n\n    // modal state\n    const handleOkay = () => {\n        PersonalService.deletePeep(parseInt(param));\n        handleClose();\n        goBack();\n    };\n\n    const handleClose = () => {\n        return setShowModal(false);\n    }\n\n    const showPop = () => {\n        return setShowModal(true);\n    }\n\n    const openModal = () => {\n        return showPop();\n    }\n\n    // editor popup modal\n    const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        const formData = new FormData(event.currentTarget);\n        const formPeepValues: Peep = {\n            id: parseInt(param),\n            name: formData.get('name') as string,\n            phone1: formData.get('phone1') as string,\n            phone2: formData.get('phone2') as string,\n            email: formData.get('email') as string,\n            address: formData.get('address') as string,\n            note: formData.get('note') as string,\n            userKey: userkey\n        };\n        PersonalService.updatePeep(parseInt(param), formPeepValues);\n        handleEditorClose();\n        goBack();\n    };\n\n    const handleEditorClose = () => {\n        return setShowEdit(false);\n    }\n\n    const showEditPop = () => {\n        return setShowEdit(true);\n    }\n\n    const openEdit = () => {\n        return showEditPop();\n    }\n\n    useEffect(() => {\n\n        const queryParams = new URLSearchParams(location.search);\n        const id = queryParams.get('id');\n        if (!id) return;\n        setParam(id);\n\n        PersonalService.getPeep(parseInt(id))\n            .then((response) => {\n                setPeep(response.data);\n            })\n\n    }, []);\n\n    if (!peep) {\n        return <div>Loading...</div>;\n    }\n\n    const userkey = peep.userKey;\n    const user = AuthService.getCurrentUser();\n\n    return (\n        <div className=\"container\">\n            <header className=\"jumbotron\">\n                <h1 className=\"display-4\">Contact Details</h1>\n                <p>This is where we show the entire Contact Object</p>\n                {user.roles.includes((\"ROLE_MONITOR\")) ? <meta/> :\n                    <Button className=\"spacial-button\" variant=\"primary\" onClick={openEdit}>Edit</Button>}\n                <Button className=\"spacial-button\" variant=\"secondary\" onClick={goBack}>Back</Button>\n                <Modal show={showEdit} onHide={handleEditorClose}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>Contact Edit</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <Form onSubmit={handleSubmit}>\n                            <Form.Group controlId=\"form1\">\n                                <Form.Label><b>Name</b></Form.Label>\n                                <Form.Control type=\"text\" defaultValue={peep.name} name=\"name\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form2\">\n                                <Form.Label><b>Phone 1</b></Form.Label>\n                                <Form.Control type=\"text\" defaultValue={peep.phone1} name=\"phone1\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form3\">\n                                <Form.Label><b>Phone 2</b></Form.Label>\n                                <Form.Control type=\"text\" defaultValue={peep.phone2} name=\"phone2\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form4\">\n                                <Form.Label><b>Email</b></Form.Label>\n                                <Form.Control type=\"text\" defaultValue={peep.email} name=\"email\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form5\">\n                                <Form.Label><b>Address</b></Form.Label>\n                                <Form.Control type=\"text\" defaultValue={peep.address} name=\"address\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form6\">\n                                <Form.Label><b>Note</b></Form.Label>\n                                <Form.Control type=\"text\" defaultValue={peep.note} name=\"note\"/>\n                            </Form.Group>\n                            <Button variant=\"primary\" type=\"submit\">\n                                Submit\n                            </Button>&nbsp;\n                            <Button variant=\"secondary\" onClick={handleEditorClose}>\n                                Cancel\n                            </Button>\n                        </Form>\n                    </Modal.Body>\n                </Modal>\n                <div className=\"detail-div\">\n                    <div><strong>id: </strong> {param}</div>\n                    <div><strong>name:</strong> {peep.name}</div>\n                    <div><strong>phone1:</strong> {peep.phone1}</div>\n                    <div><strong>phone2:</strong> {peep.phone2}</div>\n                    <div><strong>email:</strong> {peep.email}</div>\n                    <div><strong>address:</strong> {peep.address}</div>\n                    <div><strong>note:</strong> {peep.note}</div>\n                    <div><strong>userKey:</strong> {peep.userKey}</div>\n                </div>\n                {user.roles.includes((\"ROLE_MONITOR\")) ? <meta/> :\n                    <Button variant=\"danger\" onClick={openModal}>Delete</Button>}\n                <Modal show={showModal} onHide={handleClose}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>Warning</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <p>Are you sure?</p>\n                        <Button variant=\"primary\" onClick={handleOkay}>\n                            Okay\n                        </Button>&nbsp;\n                        <Button variant=\"secondary\" onClick={handleClose}>\n                            Cancel\n                        </Button>\n                    </Modal.Body>\n                </Modal>\n            </header>\n        </div>\n    );\n};\n\nexport default PeepDetails;\n"]}