{"version":3,"file":"TopPersonal.js","sourceRoot":"","sources":["TopPersonal.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * VirtualYou\n * @license Apache-2.0\n * @author David L Whitehurst\n */\nimport React, {useEffect, useState} from \"react\";\nimport CreatePeep from \"../types/createpeep.type.ts\";\nimport PersonalService from \"../services/personal.service.ts\";\nimport {Button, Form, Modal} from \"react-bootstrap\";\nimport PeepDisplay from \"./display/PeepDisplay.tsx\";\nimport AuthService from \"../services/auth.service.ts\";\n\nconst TopPersonal = () => {\n    const [peeps, setPeeps] = useState([]);\n    const [showCreate, setShowCreate] = useState(false);\n\n    // crude refresh\n    function refreshPage() {\n        window.location.reload();\n    }\n\n    // create popup modal\n    const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        const formData = new FormData(event.currentTarget);\n        const formPeepValues: CreatePeep = {\n            name: formData.get('name') as string,\n            phone1: formData.get('phone1') as string,\n            phone2: formData.get('phone2') as string,\n            email: formData.get('email') as string,\n            address: formData.get('address') as string,\n            note: formData.get('note') as string,\n            userKey: parseInt(localStorage.getItem(\"ownerid\") || \"0\")\n        };\n        PersonalService.createPeep(formPeepValues);\n        handleCreateClose();\n        refreshPage();\n        //goBack();\n    };\n\n    const handleCreateClose = () => {\n        return setShowCreate(false);\n    }\n\n    const showCreatePop = () => {\n        return setShowCreate(true);\n    }\n\n    const openCreate = () => {\n        return showCreatePop();\n    }\n\n    useEffect(() => {\n        PersonalService.getPeeps()\n            .then((response) => {\n                setPeeps(response.data);\n            })\n    }, [])\n\n    if (!peeps) {\n        return <div>Loading...</div>;\n    }\n\n    const user = AuthService.getCurrentUser();\n\n    return (\n        <div className=\"container\">\n            <header className=\"jumbotron\">\n                <h1 className=\"display-4\">Personal</h1>\n                <p>This is where we keep things closest to us.</p>\n                <h3 className=\"font-weight-light\">Contacts\n                    {user.roles.includes((\"ROLE_MONITOR\")) ? <meta/> :\n                        <Button className=\"spacial-button\" variant=\"primary\" onClick={openCreate}>New</Button>}</h3>\n                <Modal show={showCreate} onHide={handleCreateClose}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>Contact Create</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <Form onSubmit={handleSubmit}>\n                            <Form.Group controlId=\"form1\">\n                                <Form.Label><b>Name</b></Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Enter name\" id=\"name\" name=\"name\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form2\">\n                                <Form.Label><b>Phone1</b></Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Enter phone1\" id=\"phone1\" name=\"phone1\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form3\">\n                                <Form.Label><b>Phone2</b></Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Enter phone2\" id=\"phone2\" name=\"phone2\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form4\">\n                                <Form.Label><b>Email</b></Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Enter email\" id=\"email\" name=\"email\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form5\">\n                                <Form.Label><b>Address</b></Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Enter address\" id=\"address\" name=\"address\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form6\">\n                                <Form.Label><b>Note</b></Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Enter note\" id=\"note\" name=\"note\"/>\n                            </Form.Group>\n                            <Button variant=\"primary\" type=\"submit\">\n                                Submit\n                            </Button>&nbsp;\n                            <Button variant=\"secondary\" onClick={handleCreateClose}>\n                                Cancel\n                            </Button>\n                        </Form>\n                    </Modal.Body>\n                </Modal>\n                <PeepDisplay data={peeps} />\n            </header>\n        </div>\n    );\n};\n\nexport default TopPersonal;\n"]}