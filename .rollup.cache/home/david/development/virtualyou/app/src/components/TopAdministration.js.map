{"version":3,"file":"TopAdministration.js","sourceRoot":"","sources":["TopAdministration.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * VirtualYou\n * @license Apache-2.0\n * @author David L Whitehurst\n */\nimport React, {useEffect, useState} from \"react\";\nimport {Button, Form, Modal} from \"react-bootstrap\";\nimport AdministrationService from \"../services/administration.service.ts\";\nimport CreateTask from \"../types/createtask.type.ts\";\nimport TaskDisplay from \"./display/TaskDisplay.tsx\";\nimport AuthService from \"../services/auth.service.ts\";\n\nconst TopAdministration = () => {\n    const [tasks, setTasks] = useState([]);\n    const [showCreate, setShowCreate] = useState(false);\n\n    // crude refresh\n    function refreshPage() {\n        window.location.reload();\n    }\n\n    // create popup modal\n    const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        const formData = new FormData(event.currentTarget);\n        const formPeepValues: CreateTask = {\n            name: formData.get('name') as string,\n            type: formData.get('type') as string,\n            priority: formData.get('priority') as string,\n            due: formData.get('due') as string,\n            completed: formData.get('completed') as string,\n            trigger: formData.get('trigger') as string,\n            note: formData.get('note') as string,\n            userKey: parseInt(localStorage.getItem(\"ownerid\") || \"0\")\n        };\n        AdministrationService.createTask(formPeepValues);\n        handleCreateClose();\n        refreshPage();\n        //goBack();\n    };\n\n    const handleCreateClose = () => {\n        return setShowCreate(false);\n    }\n\n    const showCreatePop = () => {\n        return setShowCreate(true);\n    }\n\n    const openCreate = () => {\n        return showCreatePop();\n    }\n\n    useEffect(() => {\n        AdministrationService.getTasks()\n            .then((response) => {\n                setTasks(response.data);\n            })\n    }, [])\n\n    if (!tasks) {\n        return <div>Loading...</div>;\n    }\n\n    const user = AuthService.getCurrentUser();\n\n    return (\n        <div className=\"container\">\n            <header className=\"jumbotron\">\n                <h1 className=\"display-4\">Administration</h1>\n                <p>This is where we attempt to administrate ourselves.</p>\n                <h3 className=\"font-weight-light\">Tasks\n                    {user.roles.includes((\"ROLE_MONITOR\")) ? <meta/> :\n                        <Button className=\"spacial-button\" variant=\"primary\" onClick={openCreate}>New</Button>}</h3>\n                <Modal show={showCreate} onHide={handleCreateClose}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>Task Create</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <Form onSubmit={handleSubmit}>\n                            <Form.Group controlId=\"form1\">\n                                <Form.Label><b>Name</b></Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Enter name\" id=\"name\" name=\"name\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form2\">\n                                <Form.Label><b>Type</b></Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Enter type\" id=\"type\" name=\"type\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form3\">\n                                <Form.Label><b>Priority</b></Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Enter priority\" id=\"priority\" name=\"priority\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form4\">\n                                <Form.Label><b>Due</b></Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Enter due date\" id=\"due\" name=\"due\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form5\">\n                                <Form.Label><b>Completed</b></Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Enter complete date\" id=\"completed\" name=\"completed\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form6\">\n                                <Form.Label><b>Trigger</b></Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Enter trigger\" id=\"trigger\" name=\"trigger\"/>\n                            </Form.Group>\n                            <Form.Group controlId=\"form7\">\n                                <Form.Label><b>Note</b></Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Enter note\" id=\"note\" name=\"note\"/>\n                            </Form.Group>\n                            <Button variant=\"primary\" type=\"submit\">\n                                Submit\n                            </Button>&nbsp;\n                            <Button variant=\"secondary\" onClick={handleCreateClose}>\n                                Cancel\n                            </Button>\n                        </Form>\n                    </Modal.Body>\n                </Modal>\n                <TaskDisplay data={tasks} />\n            </header>\n        </div>\n    );\n};\n\nexport default TopAdministration;\n"]}